define(["app"],function(t){return["$scope","$http","DataService","$state","$stateParams","$css",function(t,o,a,e,n,s){function d(){for(var o in t.dateGoods){t.dateGoods[o].count||(t.dateGoods[o].count=0);for(var e in a.getAllGoods())t.dateGoods[o].id==a.getAllGoods()[e].id&&(t.dateGoods[o].count=a.getAllGoods()[e].count)}}s.bind({href:"scripts/css/market/market.css"},t),o({method:"GET",url:"json/data.js"}).then(function(o){t.data=o.data,console.log(t.data.data.categories),t.data.data.categories.map(function(o,a){void 0!=n.id?o.id==n.id&&(t.currentIndex=a):t.currentIndex=0}),t.hotID=n.id||t.data.data.categories[0].id,console.log(t.data.data.categories[0].id),t.dateGoods=t.data.data.products[t.hotID],d()},function(){console.log("失败了")}),t.chose=function(o){t.currentIndex=o,t.dateGoods=t.data.data.products[this.value.id],d()},t.add=function(){a.addGoods(this.value),d()},t.reduce=function(){a.reduceConmon(this.value),d()},t.sortArr=["综合排序","销量最高","价格最低","价格最高"],t.sortIndex=0,t.sortText=t.sortArr[0],t.sortYellow=function(o){switch(t.sortIndex=o,t.sortText=this.value,console.log(this.value),this.value){case"价格最低":t.fun=function(t){return parseFloat(t.price)},console.log(t.dateGoods);break;case"价格最高":t.fun=function(t){return-parseFloat(t.price)};break;case"综合排序":t.fun=function(t){return parseFloat(t[""])};break;case"销量最高":t.fun=function(t){return parseFloat(t.sort)}}},t.flag1=!1,t.hideSort=function(){t.flag1=!1},t.showSort=function(){t.flag1=!0},t.goDetail=function(){console.log(this.value),e.go("goodDetail",{id:JSON.stringify(this.value)})}}]});